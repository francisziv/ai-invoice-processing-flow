# AI Invoice Processing Flow – Home Assignment

This repository contains the implementation of the home assignment for an AI-based invoice processing workflow.  
The project was built using **n8n** and includes two automated flows, separated into two folders for clarity:

- **workflows/** – contains the exported n8n workflow JSON files.  
- **exports/** – contains example output files generated by the workflows (Markdown summaries).


## Overview

The solution consists of two automated processes:

### 1. Daily Currency Cache Update  
Updates **ILS** and **EUR** exchange rates once per day to ensure accurate and up-to-date currency conversions.

### 2. AI Invoice Processing Agent  
Processes incoming invoices, extracts fields using an LLM, validates purchase orders, performs currency conversion when required, and generates structured summaries in **JSON**, **Markdown**, and **HTML** formats.


## Workflow Scenarios

The invoice processing workflow handles two main scenarios:

### **1. Missing PO**
- Detects missing PO number in the extracted invoice data  
- Generates a reply message to the vendor requesting the PO  
- Produces JSON + Markdown + HTML summary for this failure case  
- Returns an appropriate status indicator

### **2. PO matches and is valid (PO exists + Balance is sufficient)**
- Extracts vendor, PO number, currency, and amount  
- Fetches matching PO from NetSuite  
- Converts currencies if needed  
- Confirms balance sufficiency  
- Generates a full JSON + Markdown + HTML summary  
- Returns a success status

## Folder Structure Explanation

- **workflows/** – includes all n8n automation logic  
- **exports/** – includes generated HTML outputs for both scenarios  


## Technologies Used
- **n8n** for workflow automation  
- **OpenAI Chat Model** for data extraction and reasoning  
- **REST API integration** for currency fetch  
- **LlamaParse API** for converting invoice PDFs into structured text before sending them to the LLM for extraction
- **Markdown → HTML** conversion for final summaries
